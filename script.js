// Translations object
const translations = {
  nl: {
    // Navigation
    "nav.home": "Home",
    "nav.about": "Over Ons",
    "nav.services": "Diensten",
    "nav.projects": "Projecten",
    "nav.contact": "Contact",
    "nav.quote": "Offerte Aanvragen",

    // Hero Section
    "hero.title": "Complete Dak Oplossingen",
    "hero.subtitle":
      "Expert in Dakisolatie, Zinkwerk, Hellende en Platte Daken",
    "hero.contact": "Neem Contact Op",
    "hero.services": "Ontdek Onze Diensten",

    // Services Section
    "services.title": "Onze Diensten",
    "services.flat.title": "Dakisolatie platte daken",
    "services.flat.description": "Bitumen - lichtkoepel",
    "services.zinc.title": "Zinkwerk",
    "services.zinc.description": "Dakgoten - Dakgootreiniging - kilgoot",
    "services.sloped.title": "Hellende Daken",
    "services.sloped.description":
      "Dakpannen - Dakisolatie - Dakraam - Nokvorst - Plastisol - Trespa - Boeiboord",
    "services.chimney.title": "Schoorsteen Reparatie",
    "services.chimney.description":
      "Lood Vervangen - Voegen - Coating - Impregneren",

    // About Section
    "about.title": "Over Ons",
    "about.paragraph1":
      "AstroDak Service is gespecialiseerd in dakisolatie en zinkwerk voor zowel hellende als platte daken Ons bedrijf werd opgericht met de visie om complete en hoogwaardige oplossingen aan onze klanten te bieden.",
    "about.paragraph2":
      "Wij beschikken over een professioneel team met ruime ervaring in dakbedekking en isolatie. Door gebruik te maken van de nieuwste technieken en kwalitatieve materialen, garanderen wij de tevredenheid van onze klanten.",
    "about.paragraph3":
      "Bij elk project streven wij naar de hoogste kwaliteits- en veiligheidsnormen, steeds met respect voor de afgesproken deadlines.",

    // Projects Section
    "projects.title": "Onze Projecten",
    "projects.filter.all": "Alle Projecten",
    "projects.filter.flat": "Dakisolatie Platte Daken",
    "projects.filter.zinc": "Zinkwerk",
    "projects.filter.sloped": "Hellende Daken",
    "projects.filter.chimney": "Schoorsteen Reparatie",

    // Process Section
    "process.title": "Hoe gaan Wij Te Werk",
    "process.step1.title": "Adviesgesprek",
    "process.step1.description":
      "Onze deskundige dakdekkers komen bij u thuis om de situatie te bekijken en uw wensen te bespreken.",
    "process.step2.title": "Offerte",
    "process.step2.description":
      "U ontvangt een vrijblijvende offerte op maat met een duidelijke prijsopgave.",
    "process.step3.title": "Uitvoering",
    "process.step3.description":
      "Na akkoord gaan we direct aan de slag met minimale overlast voor u en uw omgeving.",
    "process.step4.title": "Afronding",
    "process.step4.description":
      "We ruimen alles netjes op en controleren samen of het resultaat aan uw verwachtingen voldoet.",

    // Why Us Section
    "whyus.title": "Waarom AstroDak Service?",
    "whyus.subtitle":
      "Op zoek naar een betrouwbaar dakbedrijf? Kies voor AstroDak Service!",
    "whyus.intro":
      "Met jaren ervaring in Nederland én het buitenland zorgen wij voor:",
    "whyus.point1": "Professioneel en schoon werk",
    "whyus.point2": "Werken met eerlijkheid en betrouwbaarheid",
    "whyus.point3": "Volledige veiligheid – wij zijn VCA-gecertificeerd",
    "whyus.point4": "Snelle service zonder in te leveren op kwaliteit",
    "whyus.point5": "Concurrerende prijzen, realistisch en betaalbaar",
    "whyus.point6": "Tot 10 jaar garantie op ons werk!",
    "whyus.conclusion":
      "AstroDak Service – voor een dak waar u op kunt rekenen.",
    "whyus.cta": "Gratis Offerte Aanvragen",

    // Reviews Section
    "reviews.title": "Wat Onze Klanten Zeggen",
    "reviews.subtitle":
      "Lees ervaringen van tevreden klanten die onze diensten hebben gebruikt",

    // Contact Section
    "contact.title": "Contacteer Ons",
    "contact.info.title": "Contactgegevens",
    "contact.info.address": "Adres: Salahutunplein in Vught , Nederland",
    "contact.info.phone": "Telefoon:",
    "contact.info.email": "Email:",
    "contact.info.hours": "Openingstijden: Maandag t/m Vrijdag, 8:00 - 17:00",
    "contact.form.title": "Stuur Ons een Bericht",
    "contact.form.name": "Volledige Naam",
    "contact.form.email": "E-mail Adres",
    "contact.form.phone": "Telefoonnummer",
    "contact.form.subject": "Onderwerp",
    "contact.form.message": "Bericht",
    "contact.form.submit": "Verstuur Bericht",

    // Footer
    "footer.description":
      "Gespecialiseerd in dakisolatie, zinkwerk, hellende en platte daken. Wij bieden hoogwaardige oplossingen voor al uw dakbehoeften.",
    "footer.area.title": "Onze Werkgebied",
    "footer.links.title": "Snelle Links",
    "footer.contact.title": "Contactgegevens",
    "footer.contact.address": "Salahutunplein, Vught, Nederland",
    "footer.contact.hours": "Ma-Vrij: 8:00 - 17:00",
    "footer.copyright": "Alle rechten voorbehouden.",

    // WhatsApp
    "whatsapp.tooltip": "Stuur ons een bericht",
  },

  en: {
    // Navigation
    "nav.home": "Home",
    "nav.about": "About Us",
    "nav.services": "Services",
    "nav.projects": "Projects",
    "nav.contact": "Contact",
    "nav.quote": "Request Quote",

    // Hero Section
    "hero.title": "Complete Roofing Solutions",
    "hero.subtitle":
      "Expert in roof insulation, zinc work, sloped and flat roofs",
    "hero.contact": "Contact Us",
    "hero.services": "Discover Our Services",

    // Services Section
    "services.title": "Our Services",
    "services.flat.title": "Flat Roof Insulation",
    "services.flat.description": "Bitumen - skylights",
    "services.zinc.title": "Zinc Work",
    "services.zinc.description": "Gutters - Gutter Cleaning - valley gutters",
    "services.sloped.title": "Sloped Roofs",
    "services.sloped.description":
      "Roof tiles - Roof Insulation - Roof Windows - Ridge frost - Plastisol - Trespa - Fascia boards",
    "services.chimney.title": "Chimney Repair",
    "services.chimney.description":
      "Lead Replacement - Pointing - Coating - Impregnation",

    // About Section
    "about.title": "About Us",
    "about.paragraph1":
      "AstroDak Service specializes in roof insulation and zinc work for both pitched and flat roofs. Our company was founded with the vision to offer complete and high-quality solutions to our customers.",
    "about.paragraph2":
      "We have a professional team with extensive experience in roofing and insulation. By using the latest techniques and quality materials, we guarantee the satisfaction of our customers.",
    "about.paragraph3":
      "With every project we strive for the highest quality and safety standards, always respecting the agreed deadlines.",

    // Projects Section
    "projects.title": "Our Projects",
    "projects.filter.all": "All Projects",
    "projects.filter.flat": "Flat Roof Insulation",
    "projects.filter.zinc": "Zinc Work",
    "projects.filter.sloped": "Sloped Roofs",
    "projects.filter.chimney": "Chimney Repair",

    // Process Section
    "process.title": "How We Work",
    "process.step1.title": "Consultation",
    "process.step1.description":
      "Our expert roofers come to your home to assess the situation and discuss your needs.",
    "process.step2.title": "Quote",
    "process.step2.description":
      "You receive a non-binding customized quote with a clear price indication.",
    "process.step3.title": "Execution",
    "process.step3.description":
      "After approval, we get to work immediately with minimal inconvenience to you and your environment.",
    "process.step4.title": "Completion",
    "process.step4.description":
      "We clean up everything neatly and check together whether the result meets your expectations.",

    // Why Us Section
    "whyus.title": "Why AstroDak Service?",
    "whyus.subtitle":
      "Looking for a reliable roofing company? Choose AstroDak Service!",
    "whyus.intro":
      "With years of experience in the Netherlands and abroad, we provide:",
    "whyus.point1": "Professional and clean work",
    "whyus.point2": "Working with honesty and reliability",
    "whyus.point3": "Complete safety – we are VCA certified",
    "whyus.point4": "Fast service without compromising on quality",
    "whyus.point5": "Competitive prices, realistic and affordable",
    "whyus.point6": "Up to 10 years warranty on our work!",
    "whyus.conclusion": "AstroDak Service – for a roof you can count on.",
    "whyus.cta": "Request Free Quote",

    // Reviews Section
    "reviews.title": "What Our Customers Say",
    "reviews.subtitle":
      "Read experiences from satisfied customers who have used our services",

    // Contact Section
    "contact.title": "Contact Us",
    "contact.info.title": "Contact Information",
    "contact.info.address": "Address: Salahutunplein in Vught, Netherlands",
    "contact.info.phone": "Phone:",
    "contact.info.email": "Email:",
    "contact.info.hours": "Opening hours: Monday to Friday, 8:00 - 17:00",
    "contact.form.title": "Send Us a Message",
    "contact.form.name": "Full Name",
    "contact.form.email": "Email Address",
    "contact.form.phone": "Phone Number",
    "contact.form.subject": "Subject",
    "contact.form.message": "Message",
    "contact.form.submit": "Send Message",

    // Footer
    "footer.description":
      "Specialized in roof insulation, zinc work, sloped and flat roofs. We offer high-quality solutions for all your roofing needs.",
    "footer.area.title": "Our Service Area",
    "footer.links.title": "Quick Links",
    "footer.contact.title": "Contact Information",
    "footer.contact.address": "Salahutunplein, Vught, Netherlands",
    "footer.contact.hours": "Mon-Fri: 8:00 - 17:00",
    "footer.copyright": "All rights reserved.",

    // WhatsApp
    "whatsapp.tooltip": "Send us a message",
  },
};

// DOM Elements
const header = document.getElementById("mainHeader");
const hamburger = document.getElementById("hamburger");
const mobileMenu = document.getElementById("mobileMenu");
const overlay = document.getElementById("overlay");
const navLinks = document.querySelectorAll(".nav-link, .mobile-nav-link");
const yearSpan = document.getElementById("year");
const contactForm = document.getElementById("contactForm");

// Current language
let currentLanguage = "nl";

// Set current year in footer
if (yearSpan) {
  yearSpan.textContent = new Date().getFullYear();
}

// Language switching functionality
function initializeLanguageSwitcher() {
  const langButtons = document.querySelectorAll(".lang-btn, .mobile-lang-btn");

  langButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const newLang = button.getAttribute("data-lang");
      if (newLang !== currentLanguage) {
        switchLanguage(newLang);
      }
    });
  });
}

function switchLanguage(lang) {
  currentLanguage = lang;

  // Update active language buttons
  document.querySelectorAll(".lang-btn, .mobile-lang-btn").forEach((btn) => {
    btn.classList.remove("active");
    if (btn.getAttribute("data-lang") === lang) {
      btn.classList.add("active");
    }
  });

  // Update HTML lang attribute
  document.documentElement.lang = lang;

  // Translate all elements
  translatePage();

  // Update projects and reviews for new language
  renderProjects();
  renderReviews();

  // Store language preference
  localStorage.setItem("preferred-language", lang);
}

function translatePage() {
  const elementsToTranslate = document.querySelectorAll("[data-translate]");

  elementsToTranslate.forEach((element) => {
    const key = element.getAttribute("data-translate");
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
      element.textContent = translations[currentLanguage][key];
    }
  });

  // Update select options
  const selectOptions = document.querySelectorAll("option[data-translate]");
  selectOptions.forEach((option) => {
    const key = option.getAttribute("data-translate");
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
      option.textContent = translations[currentLanguage][key];
    }
  });
}

// Header scroll effect
window.addEventListener("scroll", () => {
  if (window.scrollY > 50) {
    header.classList.add("scrolled");
  } else {
    header.classList.remove("scrolled");
  }

  // Highlight active section
  let current = "";
  document.querySelectorAll("section").forEach((section) => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.clientHeight;

    if (pageYOffset >= sectionTop - 100) {
      current = section.getAttribute("id");
    }
  });

  navLinks.forEach((link) => {
    link.classList.remove("active");
    if (link.getAttribute("href") === `#${current}`) {
      link.classList.add("active");
    }
  });
});

// Mobile menu toggle
hamburger.addEventListener("click", () => {
  hamburger.classList.toggle("active");
  mobileMenu.classList.toggle("active");
  overlay.classList.toggle("active");

  // Toggle hamburger to X
  if (hamburger.classList.contains("active")) {
    hamburger.children[0].style.transform = "rotate(45deg) translate(5px, 6px)";
    hamburger.children[1].style.opacity = "0";
    hamburger.children[2].style.transform =
      "rotate(-45deg) translate(5px, -6px)";
  } else {
    hamburger.children[0].style.transform = "none";
    hamburger.children[1].style.opacity = "1";
    hamburger.children[2].style.transform = "none";
  }
});

// Mobile menu close when clicking any link
document.querySelectorAll(".mobile-nav-link, .mobile-cta").forEach((link) => {
  link.addEventListener("click", () => {
    hamburger.classList.remove("active");
    mobileMenu.classList.remove("active");
    overlay.classList.remove("active");
    hamburger.children[0].style.transform = "none";
    hamburger.children[1].style.opacity = "1";
    hamburger.children[2].style.transform = "none";
  });
});

// Smooth scrolling for all links
document
  .querySelectorAll(".nav-link, .mobile-nav-link, .mobile-cta, .btn")
  .forEach((link) => {
    link.addEventListener("click", (e) => {
      const href = link.getAttribute("href");
      if (href && href.startsWith("#")) {
        e.preventDefault();

        // Get target section
        const targetId = href;
        const targetSection = document.querySelector(targetId);

        if (targetSection) {
          // Scroll to target
          targetSection.scrollIntoView({
            behavior: "smooth",
          });

          // Close mobile menu if open
          if (mobileMenu.classList.contains("active")) {
            hamburger.classList.remove("active");
            mobileMenu.classList.remove("active");
            overlay.classList.remove("active");
            hamburger.children[0].style.transform = "none";
            hamburger.children[1].style.opacity = "1";
            hamburger.children[2].style.transform = "none";
          }
        }
      }
    });
  });

// Contact form submission
if (contactForm) {
  contactForm.addEventListener("submit", (e) => {
    e.preventDefault();
    const form = e.target;

    // Show loading state
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    const loadingText =
      currentLanguage === "nl" ? "Verzenden..." : "Sending...";
    const successText =
      currentLanguage === "nl"
        ? "Bericht succesvol verzonden!"
        : "Message sent successfully!";
    const errorText =
      currentLanguage === "nl"
        ? "Fout bij verzenden: "
        : "Error sending message: ";

    submitBtn.textContent = loadingText;
    submitBtn.disabled = true;

    // Simulate form submission (replace with actual form handling)
    setTimeout(() => {
      alert(successText);
      form.reset();
      submitBtn.textContent = originalText;
      submitBtn.disabled = false;
    }, 1000);
  });
}

// Project data with bilingual support
const projectsData = [
  {
    id: 1,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Bitumen Platdak Overlaag",
      en: "Bitumen Flat Roof Overlay",
    },
    category: "dakisolatie",
    image: "img/Bitumen platdak isolatie1.jpg",
  },
  {
    id: 2,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Bitumineuze dakisolatie",
      en: "Bituminous roof insulation",
    },
    category: "dakisolatie",
    image: "img/Bitumen platdak isolatie2.jpg",
  },
  {
    id: 3,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dakpannen",
      en: "Roof tiles",
    },
    category: "hellededaken",
    image: "img/Dakpannen1.jpg",
  },
  {
    id: 4,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dakpannen",
      en: "Roof tiles",
    },
    category: "hellededaken",
    image: "img/Dakpannen2.jpg",
  },
  {
    id: 5,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dakpannen",
      en: "Roof tiles",
    },
    category: "hellededaken",
    image: "img/Dakpannen3.jpg",
  },
  {
    id: 6,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Lichtkoepel",
      en: "Skylight",
    },
    category: "dakisolatie",
    image: "img/lichtKoepel1.jpg",
  },
  {
    id: 7,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Lichtkoepel",
      en: "Skylight",
    },
    category: "dakisolatie",
    image: "img/lichtKoepel2.jpg",
  },
  {
    id: 8,
    title: {
      nl: "Schoorsteen Reparatie",
      en: "Chimney Repair",
    },
    description: {
      nl: "Schoorsteen",
      en: "Chimney",
    },
    category: "schoorsteen",
    image: "img/schoorsteen1.jpg",
  },
  {
    id: 9,
    title: {
      nl: "Schoorsteen Reparatie",
      en: "Chimney Repair",
    },
    description: {
      nl: "Schoorsteen",
      en: "Chimney",
    },
    category: "schoorsteen",
    image: "img/schoorsteen2.jpg",
  },
  {
    id: 10,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Bitumen ",
      en: "Bitumen ",
    },
    category: "dakisolatie",
    image: "img/Bitumen platdak isolatie3.jpg",
  },
  {
    id: 11,
    title: {
      nl: "Dakisolatie Platte Daken",
      en: "Flat Roof Insulation",
    },
    description: {
      nl: "Bitumen ",
      en: "Bitumen ",
    },
    category: "dakisolatie",
    image: "img/Bitumen platdak isolatie4.jpg",
  },
  {
    id: 12,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dakraam",
      en: "Roofwindow",
    },
    category: "hellededaken",
    image: "img/Dakraam vervangen1.jpg",
  },
  {
    id: 13,
    title: {
      nl: "Zinkwerk",
      en: "Zinc Work",
    },
    description: {
      nl: "Dakgoot",
      en: "Gutter",
    },
    category: "zinkwerk",
    image: "img/Zinkwerk-Dakgootset.jpg",
  },
  {
    id: 14,
    title: {
      nl: "Zinkwerk",
      en: "Zinc Work",
    },
    description: {
      nl: "Dakgoot",
      en: "Gutter",
    },
    category: "zinkwerk",
    image: "img/Zinkwerk-Dakgootset2.jpg",
  },
  {
    id: 15,
    title: {
      nl: "Zinkwerk",
      en: "Zinc Work",
    },
    description: {
      nl: "Dakgoot",
      en: "Gutter",
    },
    category: "zinkwerk",
    image: "img/Zinkwerk-Dakgootset3.jpg",
  },
  {
    id: 16,
    title: {
      nl: "Zink werk",
      en: "Zinc Work",
    },
    description: {
      nl: "Kilgoot",
      en: "Kilgoot",
    },
    category: "zinkwerk",
    image: "img/kilgoot.jpg",
  },
  {
    id: 17,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dakisolatie Platen",
      en: "Roof insulation boards",
    },
    category: "hellededaken",
    image: "img/Dakisolatie1.jpg",
  },
  {
    id: 18,
    title: {
      nl: "Hellende Daken",
      en: "Sloped Roofs",
    },
    description: {
      nl: "Dak Islolatie Folie",
      en: "Roof Insulation Foil",
    },
    category: "hellededaken",
    image: "img/Dakisolatie2.jpg",
  },
];

// Reviews data with bilingual support
const reviewsData = [
  {
    id: 1,
    name: "Mark van Dijk",
    location: "'s-Hertogenbosch",
    rating: 5,
    text: {
      nl: "AstroDak heeft ons platdak perfect geïsoleerd. Het team was professioneel, netjes en heeft alles volgens afspraak opgeleverd. De isolatie werkt uitstekend - we merken direct het verschil in temperatuur en geluidsisolatie.",
      en: "AstroDak perfectly insulated our flat roof. The team was professional, neat and delivered everything as agreed. The insulation works excellently - we immediately notice the difference in temperature and sound insulation.",
    },
    date: {
      nl: "15 mei 2024",
      en: "May 15, 2024",
    },
  },
  {
    id: 2,
    name: "Eva Janssen",
    location: "Eindhoven",
    rating: 4,
    text: {
      nl: "Zeer tevreden over de zinkwerkzaamheden aan onze dakgoten. Snel geregeld en goede communicatie. Alleen het schoonmaken achteraf had wat beter gekund, maar verder prima ervaring.",
      en: "Very satisfied with the zinc work on our gutters. Quickly arranged and good communication. Only the cleaning afterwards could have been better, but otherwise excellent experience.",
    },
    date: {
      nl: "2 april 2024",
      en: "April 2, 2024",
    },
  },
  {
    id: 3,
    name: "Peter de Vries",
    location: "Breda",
    rating: 5,
    text: {
      nl: "Fantastisch werk geleverd aan ons hellend dak. De dakpannen zijn perfect vervangen en de isolatie is onberispelijk uitgevoerd. Prijs-kwaliteitverhouding is uitstekend. Zeker een aanrader!",
      en: "Fantastic work done on our sloped roof. The roof tiles were perfectly replaced and the insulation was impeccably executed. Price-quality ratio is excellent. Definitely recommended!",
    },
    date: {
      nl: "22 maart 2024",
      en: "March 22, 2024",
    },
  },
];

// Function to render reviews
function renderReviews() {
  const reviewsContainer = document.querySelector(".reviews-container");
  if (!reviewsContainer) return;

  reviewsContainer.innerHTML = "";

  reviewsData.forEach((review) => {
    const reviewCard = document.createElement("div");
    reviewCard.className = "review-card";

    // Get initials for avatar
    const initials = review.name
      .split(" ")
      .map((n) => n[0])
      .join("")
      .toUpperCase();

    // Create stars HTML
    let starsHtml = "";
    for (let i = 1; i <= 5; i++) {
      if (i <= review.rating) {
        starsHtml += '<i class="fas fa-star"></i>';
      } else {
        starsHtml += '<i class="far fa-star"></i>';
      }
    }

    reviewCard.innerHTML = `
      <div class="review-header">
        <div class="review-avatar">${initials}</div>
        <div class="review-info">
          <h4>${review.name}</h4>
          <p>${review.location}</p>
        </div>
      </div>
      <div class="review-stars">
        ${starsHtml}
      </div>
      <div class="review-text">
        ${review.text[currentLanguage]}
      </div>
      <span class="review-date">${review.date[currentLanguage]}</span>
    `;

    reviewsContainer.appendChild(reviewCard);
  });
}

// Function to render projects
function renderProjects(filter = "all") {
  const projectsGrid = document.querySelector(".projects-grid");
  if (!projectsGrid) return;

  projectsGrid.innerHTML = "";

  const filteredProjects =
    filter === "all"
      ? projectsData
      : projectsData.filter((project) => project.category === filter);

  filteredProjects.forEach((project) => {
    const projectCard = document.createElement("div");
    projectCard.className = "project-card";
    projectCard.dataset.category = project.category;

    projectCard.innerHTML = `
  <img src="${project.image}" 
       loading="lazy" 
       alt="${project.title[currentLanguage]} - ${project.description[currentLanguage]} | AstroDak ${project.category}" 
       width="400" 
       height="300"
       class="project-image"
       onerror="this.src='fallback-image.jpg'">
  <div class="project-overlay" aria-hidden="true">
    <h3>${project.title[currentLanguage]}</h3>
    <p>${project.description[currentLanguage]}</p>
  </div>
`;

    projectsGrid.appendChild(projectCard);
  });
}

// Initialize everything when DOM is loaded
document.addEventListener("DOMContentLoaded", () => {
  // Check for saved language preference
  const savedLanguage = localStorage.getItem("preferred-language");
  if (savedLanguage && translations[savedLanguage]) {
    currentLanguage = savedLanguage;
  }

  // Initialize language switcher
  initializeLanguageSwitcher();

  // Set initial language
  switchLanguage(currentLanguage);

  // Render initial content
  renderReviews();
  renderProjects();
});

// Filter projects when dropdown changes
document.addEventListener("DOMContentLoaded", () => {
  const projectFilter = document.getElementById("projectFilter");
  if (projectFilter) {
    projectFilter.addEventListener("change", function () {
      renderProjects(this.value);
    });
  }
});

// Escape key to close modal
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") {
    const modal = document.getElementById("reviewModal");
    if (modal && modal.style.display === "block") {
      modal.style.display = "none";
      document.body.style.overflow = "";
    }
  }
});

// Console log for debugging
console.log("Bilingual script loaded successfully");
